<!DOCTYPE html>
<html>
<head>
<title>Next Lar</title>
<meta charset="utf-8">
<link rel="icon" href="nextlar.jpg" type="image/jpeg" sizes="any">
<link rel="apple-touch-icon" href="nextlar.jpg">
<link rel="shortcut icon" href="nextlar.jpg">
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui" />
<style> @-ms-viewport { width: device-width; } </style>
<link rel="stylesheet" href="vendor/reset.min.css">
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Logo */
#logoContainer {
  position: fixed;
  top: 52px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}

#companyLogo {
  height: 66px;
  width: 66px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
  cursor: pointer;
  transition: transform 0.2s ease, opacity 0.2s ease;
  opacity: 0.6;
}

#companyLogo:hover {
  transform: scale(1.1);
  opacity: 1;
}

/* Sidebar - INICIA RECOLHIDO */
#sceneList {
  background: rgba(0,0,0,0.8) !important;
  font-family: 'Poppins', sans-serif !important;
  display: none !important;
}

#sceneList ul { background: transparent !important; }
#sceneList .scenes li {
  background: rgba(0,0,0,0.6) !important;
  font-family: 'Poppins', sans-serif !important;
  color: white !important;
  transition: all 0.2s ease !important;
}
#sceneList .scenes li:hover {
  background: rgba(255,255,255,0.3) !important;
}

/* ESCONDE barra e controles */
#titleBar { display: none !important; }
#autorotateToggle, #fullscreenToggle, #sceneListToggle,
#viewUp, #viewDown, #viewLeft, #viewRight, #viewIn, #viewOut { 
  display: none !important; 
}

/* Proteção panorama */
#pano * { filter: none !important; -webkit-filter: none !important; }
</style>
</head>
<body class="multiple-scenes">

<!-- Logo -->
<a href="https://www.instagram.com/nextlar.construtora" target="_blank">
  <div id="logoContainer">
    <img id="companyLogo" src="nextlar.jpg" alt="Next Lar - Instagram" title="Visite nosso Instagram">
  </div>
</a>

<div id="pano"></div>

<div id="sceneList">
  <ul class="scenes">
      <a href="javascript:void(0)" class="scene" data-id="0-1"><li class="text">Fachada</li></a>
      <a href="javascript:void(0)" class="scene" data-id="1-2"><li class="text">Garagem</li></a>
      <a href="javascript:void(0)" class="scene" data-id="2-3"><li class="text">Sala</li></a>
      <a href="javascript:void(0)" class="scene" data-id="3-4"><li class="text">Quarto 1</li></a>
      <a href="javascript:void(0)" class="scene" data-id="4-5"><li class="text">Banheiro 1</li></a>
      <a href="javascript:void(0)" class="scene" data-id="5-6"><li class="text">Quarto 2</li></a>
      <a href="javascript:void(0)" class="scene" data-id="6-7"><li class="text">Cozinha</li></a>
      <a href="javascript:void(0)" class="scene" data-id="7-8"><li class="text">Quarto 3</li></a>
      <a href="javascript:void(0)" class="scene" data-id="8-9"><li class="text">Closet</li></a>
      <a href="javascript:void(0)" class="scene" data-id="9-10"><li class="text">Banheiro 2</li></a>
      <a href="javascript:void(0)" class="scene" data-id="10-11"><li class="text">Área social</li></a>
      <a href="javascript:void(0)" class="scene" data-id="11-12"><li class="text">Muro</li></a>
      <a href="javascript:void(0)" class="scene" data-id="12-13"><li class="text">Área de serviço</li></a>
  </ul>
</div>

<!-- Elementos vazios pro index.js -->
<div id="titleBar"></div>
<a href="javascript:void(0)" id="autorotateToggle" style="display: none;"></a>
<a href="javascript:void(0)" id="fullscreenToggle" style="display: none;"></a>
<a href="javascript:void(0)" id="sceneListToggle" style="display: none;"></a>
<a href="javascript:void(0)" id="viewUp" class="viewControlButton viewControlButton-1" style="display: none;"></a>
<a href="javascript:void(0)" id="viewDown" class="viewControlButton viewControlButton-2" style="display: none;"></a>
<a href="javascript:void(0)" id="viewLeft" class="viewControlButton viewControlButton-3" style="display: none;"></a>
<a href="javascript:void(0)" id="viewRight" class="viewControlButton viewControlButton-4" style="display: none;"></a>
<a href="javascript:void(0)" id="viewIn" class="viewControlButton viewControlButton-5" style="display: none;"></a>
<a href="javascript:void(0)" id="viewOut" class="viewControlButton viewControlButton-6" style="display: none;"></a>

<script src="vendor/screenfull.min.js"></script>
<script src="vendor/bowser.min.js"></script>
<script src="vendor/marzipano.js"></script>
<script src="data.js"></script>

<!-- INTERCEPTA CLICK NOS HOTSPOTS ANTES do index.js -->
<script>
let currentViewer = null;
let zoomTimeout = null;

// Espera Marzipano carregar
function waitForMarzipano() {
  if (typeof marzipano !== 'undefined' && window.viewer) {
    currentViewer = window.viewer;
    addHotspotZoom();
  } else {
    setTimeout(waitForMarzipano, 100);
  }
}

// Adiciona zoom aos hotspots
function addHotspotZoom() {
  const panoElement = document.getElementById('pano');
  
  // Intercepta todos os cliques nos hotspots
  panoElement.addEventListener('click', function(e) {
    if (e.target.classList.contains('hotspot') || e.target.closest('.hotspot')) {
      e.stopPropagation();
      
      // ZOOM IN suave
      if (currentViewer) {
        currentViewer.zoomTo({
          center: currentViewer.center(),
          zoom: currentViewer.zoom() * 1.8, // Zoom 80% maior
          easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
        });
        
        // Volta ao normal após 2s
        clearTimeout(zoomTimeout);
        zoomTimeout = setTimeout(() => {
          if (currentViewer) {
            currentViewer.zoomTo({
              center: currentViewer.center(),
              zoom: currentViewer.zoom() / 1.8,
              easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
            });
          }
        }, 2000);
      }
    }
  }, true);
}

waitForMarzipano();
</script>

<script src="index.js"></script>

<script>
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', e => {
  if(e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || 
     (e.ctrlKey && e.shiftKey && e.key === 'J') || (e.ctrlKey && e.key === 'u')) {
    e.preventDefault();
  }
});
document.onselectstart = () => false;

const observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
      const sceneList = document.getElementById('sceneList');
      if (sceneList.classList.contains('show') || 
          sceneList.style.display === 'block' || 
          window.getComputedStyle(sceneList).display !== 'none') {
        sceneList.style.display = 'block';
      }
    }
  });
});
observer.observe(document.getElementById('sceneList'), { attributes: true });
</script>

</body>
</html>
